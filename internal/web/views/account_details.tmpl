{{define "content"}}
<section class="auth-card">
  <h1>Edit Details</h1>
  <p>Signed in as <strong>{{.CurrentUser.Username}}</strong></p>

  {{if .Error}}
  <div class="alert error">{{.Error}}</div>
  {{end}}
  {{if .Success}}
  <div class="alert success">{{.Success}}</div>
  {{end}}

  <form method="POST" action="/account/details">
    <input type="hidden" name="intent" value="theme">
    <div class="form-field">
      <label for="theme">Theme</label>
      <select id="theme" name="theme">
        <option value="system" {{if eq .Theme "system"}}selected{{end}}>System default</option>
        <option value="light" {{if eq .Theme "light"}}selected{{end}}>Light</option>
        <option value="dark" {{if eq .Theme "dark"}}selected{{end}}>Dark</option>
      </select>
    </div>
    <button type="submit" class="btn btn-primary">Save preferences</button>
  </form>

  <hr style="margin:20px 0; border:0; border-top:1px solid var(--border);">

  <form method="POST" action="/account/details">
    <input type="hidden" name="intent" value="username">
    <div class="form-field">
      <label for="new_username">New username</label>
      <input id="new_username" name="new_username" type="text" value="{{.CurrentUser.Username}}" autocomplete="username" required>
    </div>
    <div class="form-field">
      <label for="current_password">Current password</label>
      <input id="current_password" name="current_password" type="password" autocomplete="current-password" required>
    </div>
    <button type="submit" class="btn btn-primary">Update username</button>
  </form>
</section>
{{end}}
