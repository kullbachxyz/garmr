{{define "layout"}}
<!doctype html>
<html lang="en" data-theme="{{themeValue .CurrentUser}}">
<head>
  <meta charset="utf-8" />
  <title>garmr</title>
  <link rel="icon" href="/static/favicon.svg" type="image/svg+xml" />
  <link rel="stylesheet" href="/static/css/app.css" />
  <link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
  crossorigin=""
/>
<script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
  crossorigin=""
  defer
></script>
</head>
<body>
  <header class="topbar">
    <nav class="nav">
      <div class="nav-links">
        <a id="logo" href="/">garmr</a>
        {{if .CurrentUser}}
        <!--<a href="/">Dashboard</a>-->
        <a href="/activities">Activities</a>
        <a href="/stats">Statistics</a>
        <a href="/calendar">Calendar</a>
        <a href="/import">Import</a>
        {{end}}
      </div>
      <div class="nav-auth">
        {{if .CurrentUser}}
          <details class="user-menu">
            <summary class="nav-user" aria-label="Account menu">{{.CurrentUser.Username}}</summary>
            <div class="user-menu-panel">
              <a href="/account/details">Edit details</a>
              <a href="/account/password">Change password</a>
            </div>
          </details>
          <form method="POST" action="/logout" class="logout-form">
            <button type="submit" class="btn">Logout</button>
          </form>
        {{else}}
          <a href="/login" class="login-link">Sign in</a>
        {{end}}
      </div>
    </nav>
  </header>

  <main class="container">
    {{block "content" .}}{{end}}
  </main>
  <footer class="site-footer" aria-hidden="true"></footer>

  <script defer src="/static/js/app.js"></script>
</body>
</html>
{{end}}
